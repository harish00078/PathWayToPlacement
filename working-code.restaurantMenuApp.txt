<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz App</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <div id="start-rules">
        <h2>Welcome to Ninja's Quiz.</h2>
        <h3>Rules:</h3>
        <ul>
          <li>You have 60 seconds to answer as many questions as possible.</li>
          <li>Each correct answer increases your score by 1.</li>
          <li>Try to get as many correct answers as you can!</li>
        </ul>
      </div>
      <div id="startScreen">
        <button id="startQuiz">Start Quiz</button>
      </div>
      <div id="quizScreen" class="hidden">
        <div id="question"></div>
        <button class="answer" onclick="selectAnswer(0)"></button>
        <button class="answer" onclick="selectAnswer(1)"></button>
        <button class="answer" onclick="selectAnswer(2)"></button>
        <button class="answer" onclick="selectAnswer(3)"></button>
        <div id="timer">Time left: 60 seconds</div>
        <div id="scoreDisplay">Score: <span id="score">0</span></div>
      </div>
      <div id="endScreen" class="hidden">
        <div>
          <h2 id="game-over">Game Over!</h2>
          <p>Improve Your knowledge by playing it again and again.</p>
          <h3><p id="endMessage"></p></h3>
          <div>Final Score: <span id="finalScore"></span></div>
          <button id="playAgain">Play Again</button>
        </div>
      </div>
    </div>
    <script src="script.js"></script>
  </body>
</html>
body {
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    background-color: #f0f0f0;
}

.container {
    background-color: white;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    max-width: 500px;
    width: 100%;
}

button {
    border: none;
    border-radius: 20px;
    padding: 10px 20px;
    margin: 5px 0;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
    width: 100%;
    text-align: left;
}

#startQuiz, #playAgain {
    background-color: #4CAF50;
    color: white;
    text-align: center;
}

#startQuiz:hover, #playAgain:hover {
    background-color: #45a049;
}

.answer {
    background-color: #6c5ce7;
    color: white;
}

.answer:hover {
    background-color: #5b4ec7;
}

#timer {
    background-color: #ff7675;
    color: white;
    padding: 10px;
    border-radius: 20px;
    text-align: center;
    margin-top: 10px;
}

#scoreDisplay {
    margin-top: 10px;
    text-align: center;
}

.hidden {
    display: none;
}
let score = 0;
let timer = 60;
let interval;

const scoreDisplay = document.getElementById('score');
const startRulesDiv = document.getElementById("start-rules");
const questionDiv = document.getElementById('question');
const answerButtons = document.getElementsByClassName('answer');
const timerDiv = document.getElementById('timer');
const finalScore = document.getElementById('finalScore');
const endMessage = document.getElementById('endMessage');

document.getElementById('startQuiz').addEventListener('click', function () {
    startRulesDiv.style.display = "none";
    document.getElementById('startScreen').classList.add('hidden');
    document.getElementById('quizScreen').classList.remove('hidden');
    getQuestion();
    startTimer();
    updateScore();
});

document.getElementById('playAgain').addEventListener('click', function () {
    document.getElementById('endScreen').classList.add('hidden');
    score = 0;
    timer = 60;
    document.getElementById('quizScreen').classList.remove('hidden');
    getQuestion();
    startTimer();
    updateScore();
});

async function getQuestion() {
    try {
        const response = await fetch('https://opentdb.com/api.php?amount=1');
        const data = await response.json();
        const question = data.results[0];
        
        questionDiv.innerHTML = question.question;
        const correctIndex = Math.floor(Math.random() * 4);
        const answers = question.incorrect_answers;
        answers.splice(correctIndex, 0, question.correct_answer);
        
        for (let i = 0; i < 4; i++) {
            answerButtons[i].innerHTML = answers[i];
            answerButtons[i].dataset.correct = (i === correctIndex);
        }
    } catch (error) {
        questionDiv.innerHTML = 'Failed to load question. Please try again.';
    }
}

function selectAnswer(index) {
    const isCorrect = answerButtons[index].dataset.correct === 'true';
    if (isCorrect) {
        score++;
        updateScore();
    }
    getQuestion();
}

function updateScore() {
    scoreDisplay.innerHTML = score;
}

function startTimer() {
    interval = setInterval(function () {
        timer--;
        timerDiv.innerHTML = `Time left: ${timer} seconds`;
        if (timer <= 0) {
            clearInterval(interval);
            endGame();
        }
    }, 1000);
}

function endGame() {
    document.getElementById('quizScreen').classList.add('hidden');
    document.getElementById('endScreen').classList.remove('hidden');
    finalScore.innerHTML = score;
    endMessage.innerHTML = `Your final score is ${score}. Great job!`;
}
